(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"68a8":function(e,t,r){"use strict";var s=r("ed6f"),a=r.n(s);a.a},"98d8":function(e,t,r){},"9cb5":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login"},[e._m(0),r("div",{staticClass:"login-content"},[r("div",{staticClass:"login-wrap"},[r("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"登录",name:"login"}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入用户名"},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{staticStyle:{width:"240px"},attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),r("el-form-item",{attrs:{label:"","label-width":"120px"}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submintForm("ruleForm")}}},[e._v("提交")]),r("el-button",{on:{click:function(t){e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1),r("el-tab-pane",{attrs:{label:"注册",name:"register"}},[r("el-form",{ref:"registerForm",staticClass:"demo-ruleForm",attrs:{model:e.registerForm,"status-icon":"",rules:e.registerRules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入用户名"},model:{value:e.registerForm.username,callback:function(t){e.$set(e.registerForm,"username",t)},expression:"registerForm.username"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{staticStyle:{width:"240px"},attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.registerForm.password,callback:function(t){e.$set(e.registerForm,"password",t)},expression:"registerForm.password"}})],1),r("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[r("el-input",{staticStyle:{width:"240px"},attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.registerForm.checkPass,callback:function(t){e.$set(e.registerForm,"checkPass",t)},expression:"registerForm.checkPass"}})],1),r("el-form-item",{attrs:{label:"","label-width":"120px"}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submintRegisterForm("registerForm")}}},[e._v("提交")]),r("el-button",{on:{click:function(t){e.resetRegisterForm("registerForm")}}},[e._v("重置 ")])],1)],1)],1)],1)],1)])])},a=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login-icon"},[s("img",{attrs:{src:r("cf05")}}),s("h5",[e._v("后台管理系统")])])}],i=(r("96cf"),r("3040")),o=(r("cadf"),r("551c"),r("097d"),r("a78e")),n=r.n(o),l=(r("ac6a"),window.localStorage),c=(window.sessionStorage,{setItem:function(e,t){t=JSON.stringify(t),l.setItem(e,t)},getItem:function(e){var t=l.getItem(e);return JSON.parse(t)},clear:function(){l.clear()},removeItem:function(e){l.removeItem(e)},multiGet:function(e){var t=this,r={};return e.forEach(function(e){r[e]=t.getItem(e)}),r},multiRemove:function(e){var t=this;e.forEach(function(e){return t.removeItem(e)})}});console.log(c);var u={data:function(){var e=this,t=function(t,r,s){""===r?s(new Error("请输入密码")):(""!==e.registerForm.checkPass&&e.$refs.registerForm.validateField("checkPass"),s())},r=function(t,r,s){""===r?s(new Error("请再次输入密码")):r!==e.registerForm.password?s(new Error("两次输入密码不一致!")):s()};return{ruleForm:{username:"",password:""},rules:{username:[{required:!0,message:"请输入用户名"}],password:[{required:!0,message:"请输入密码"}]},activeName:"login",registerForm:{username:"",password:"",checkPass:""},registerRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,validator:t,trigger:"blur"}],checkPass:[{required:!0,validator:r,trigger:"blur"}]}}},methods:{submintForm:function(e){var t=this;console.log(this.ruleForm,"ss"),this.$refs[e].validate(function(e){if(!e)return!1;t.login()})},resetForm:function(e){this.ruleForm={username:"",password:"",checkPass:""},this.$refs[e].resetFields()},login:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.ruleForm,e.next=3,this.$http.post("/api/login",t);case 3:r=e.sent,console.log(r),r.data&&0===r.data.code?(c.setItem("userInfo",JSON.stringify(r.data.data)),n.a.set("token",r.data.token),n.a.set("token-exp",(new Date).getTime()),n.a.set("userName",r.data.data.username),this.$message.success("登录成功"),this.$router.push("/")):this.$message.error(r.data.desc);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),register:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.registerForm,e.next=3,this.$http.post("/api/register",t);case 3:r=e.sent,console.log(r,"ppos"),r.data&&0===r.data.code?(this.$message.success("注册成功"),this.activeName="login"):this.$message.error(r.data.desc);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),submintRegisterForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.register()})},resetRegisterForm:function(e){this.registerForm={username:"",password:"",checkPass:""},this.$refs[e].resetFields()},handleClick:function(){this.resetRegisterForm("registerForm"),this.resetForm("ruleForm")}}},m=u,d=(r("68a8"),r("a5b7"),r("2877")),p=Object(d["a"])(m,s,a,!1,null,"15e95c4e",null);p.options.__file="index.vue";t["default"]=p.exports},a5b7:function(e,t,r){"use strict";var s=r("98d8"),a=r.n(s);a.a},ac6a:function(e,t,r){for(var s=r("cadf"),a=r("0d58"),i=r("2aba"),o=r("7726"),n=r("32e9"),l=r("84f2"),c=r("2b4c"),u=c("iterator"),m=c("toStringTag"),d=l.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=a(p),g=0;g<f.length;g++){var h,F=f[g],v=p[F],w=o[F],b=w&&w.prototype;if(b&&(b[u]||n(b,u,d),b[m]||n(b,m,F),l[F]=d,v))for(h in s)b[h]||i(b,h,s[h],!0)}},ed6f:function(e,t,r){}}]);
//# sourceMappingURL=login.01c3e69f.js.map